:root{
  // GROUPED SECTION SETTINGS (BACKGROUND COLOR, PADDING, MARGIN)
  // CHANGE THESE PROPERTIES TO CHANGE ALL PROPERTIES VALUES IN THOSE SECTIONS
  --engrid-page_background-color: var(--color-transparent);
  --engrid-page_padding: 0px;
  --engrid-page_margin: 0px;

  --engrid-content_background-color: var(--color-transparent);
  --engrid-content_padding: 0px;
  --engrid-content_margin: 0px;

  --body-background-color: var(--color-white);
  --body-padding: 0px var(--spacing-lg);
  --body-margin: 0px;
  --body-border-radius: 0px; // UNIQUE TO THE BODY

  // INDIVIDUAL SECTION SETTINGS (BACKGROUND COLOR, PADDING, MARGIN)
  --engrid-page_alert-background-color: var(--engrid-page_background-color);
  --engrid-page_alert-padding: var(--engrid-page_padding);
  --engrid-page_alert-margin: var(--engrid-page_margin);

  --engrid-content_header-background-color: var(--engrid-content_background-color);
  --engrid-content_header-padding: var(--engrid-content_padding);
  --engrid-content_header-margin: var(--engrid-content_margin);

  --body-headerOutside-background-color: var(--color-transparent);
  --body-headerOutside-padding: var(--body-padding);
  --body-headerOutside-margin: var(--body-margin);

  --body-header-background-color: var(--body-background-color);
  --body-header-padding: var(--body-padding);
  --body-header-margin: var(--body-margin);

  --body-title-background-color: var(--body-background-color);
  --body-title-padding: var(--body-padding);
  --body-title-margin: var(--body-margin);

  --body-banner-background-color: var(--body-background-color);
  --body-banner-padding: 0px;
  --body-banner-margin: var(--body-margin);

  --body-bannerOverlay-background-color: var(--color-transparent);
  --body-bannerOverlay-padding: var(--body-padding);
  --body-bannerOverlay-margin: var(--body-margin);

  --body-top-background-color: var(--body-background-color);
  --body-top-padding: var(--body-padding);
  --body-top-margin: var(--body-margin);

  --body-side-background-color: var(--body-background-color);
  --body-side-padding: var(--body-padding);
  --body-side-margin: var(--body-margin);

  --body-main-background-color: var(--body-background-color);
  --body-main-padding: var(--body-padding);
  --body-main-margin: var(--body-margin);

  --body-bottom-background-color: var(--body-background-color);
  --body-bottom-padding: var(--body-padding);
  --body-bottom-margin: var(--body-margin);

  --body-footer-background-color: var(--body-background-color);
  --body-footer-padding: var(--body-padding);
  --body-footer-margin: var(--body-margin);

  --body-footerOutside-background-color: var(--color-transparent);
  --body-footerOutside-padding: var(--body-padding);
  --body-footerOutside-margin: var(--body-margin);

  --engrid-content_footerSpacer-background-color: var(--engrid-content_background-color);
  --engrid-content_footerSpacer-padding: var(--engrid-content_padding);
  --engrid-content_footerSpacer-margin: var(--engrid-content_margin);

  --engrid-content_preFooter-background-color: var(--engrid-content_background-color);
  --engrid-content_preFooter-padding: var(--engrid-content_padding);
  --engrid-content_preFooter-margin: var(--engrid-content_margin);

  --engrid-content_footer-background-color: var(--engrid-content_background-color);
  --engrid-content_footer-padding: var(--engrid-content_padding);
  --engrid-content_footer-margin: var(--engrid-content_margin);

  --engrid-page_backgroundImage-background-color: var(--engrid-page_background-color);
  --engrid-page_backgroundImage-padding: 0px;
  --engrid-page_backgroundImage-margin: var(--engrid-page_margin);

  --engrid-page_backgroundImageOverlay-background-color: var(--color-transparent);
  --engrid-page_backgroundImageOverlay-padding: var(--engrid-page_padding);
  --engrid-page_backgroundImageOverlay-margin: var(--engrid-page_margin);

  --engrid-page_customCode-background-color: var(--engrid-page_background-color);
  --engrid-page_customCode-padding: var(--engrid-page_padding);    
  --engrid-page_customCode-margin: var(--engrid-page_margin);   
}

// ####################################################################
//  Style Sections Both Inside AND Outside of Page Builder
// ####################################################################

.en__component--row.en__component--advrow,
.pseudo-subgrid{
  /* autoprefixer grid: off */
  display: grid;
}

// @TODO This prevents a layout problem in pagebuilder (https://d.pr/i/cEcwSo)
body#en__pagebuilder .page-backgroundImage.pseudo-subgrid{
  display: block;
}

// Ensure the ENGrid advanced row (there should only be one) occupies the full viewport at a minimum
.en__component--advrow {
  width: 100%;
  max-width: 100vw;
}

// Set the min-height of a page to the viewport height; except when embedded because there is no "viewport" as far as the iframe is concerned
// This also prevents an issue with Safari where the height of the iFrame'ed page can not be calculated correctly (https://d.pr/v/O2kcrb)
body:not([data-engrid-embedded]) .en__component--advrow {
  min-height: 100vh;
}

/*
* ##########################################################
* # ENGRID - BODY Column Breakpoint Styling
* ##########################################################
*/

// Define all the named columns of the ENGrid
// The 'pseudo-subgrid' is used to position first generation child content horizontally in page spanning grid components'
/* prettier-ignore */
.en__component--advrow,
.pseudo-subgrid{
  /* autoprefixer grid: off */
  grid-template-columns:
  [
    pc-start lpc-start lpc-end cc-start lcc-start lcc-end bc-start lbc-start lbc-end
  ] auto [
    rbc-start rbc-end bc-end rcc-start rcc-end cc-end rpc-start rpc-end pc-end
  ];
}


/* Sum of all MIN values of the Body Columns */
@media screen and (min-width: 650px) {
  /* prettier-ignore */
  .en__component--advrow,
  .pseudo-subgrid{
    /* autoprefixer grid: off */
    grid-template-columns:
    [
      pc-start lpc-start]  minmax(25px, 1fr)     [lpc-end
      cc-start lcc-start]  minmax(0px, 0px)      [lcc-end
      bc-start lbc-start]  minmax(300px, 425px)  [lbc-end
      rbc-start]           minmax(300px, 425px)  [rbc-end bc-end
      rcc-start]           minmax(0px, 0px)      [rcc-end cc-end
      rpc-start]           minmax(25px, 1fr)     [rpc-end pc-end
    ];
  }
}


// Define all the named rows of the ENGrid
/* prettier-ignore */
.en__component--advrow{
  /* autoprefixer grid: off */
  grid-template-rows:
  [
    page-start page-alert-start]        min-content        [page-alert-end
    content-header-start]               min-content        [content-header-end
    body-headerOutside-start]           min-content        [body-headerOutside-end
    body-header-start]                  min-content        [body-header-end
    body-title-start]                   min-content        [body-title-end
    body-banner-start]                  min-content        [body-banner-end
    body-bannerOverlay-start]           min-content        [body-bannerOverlay-end
    body-top-start]                     min-content        [body-top-end
    body-side-start]                    min-content        [body-side-end  
    body-main-start]                    min-content        [body-main-end  
    body-bottom-start]                  min-content        [body-bottom-end  
    body-footer-start]                  min-content        [body-footer-end
    body-footerOutside-start]           min-content        [body-footerOutside-end  
    content-footerSpacer-start]         minmax(0px, 1fr)   [content-footerSpacer-end
    content-preFooter-start]            min-content        [content-preFooter-end
    content-footer-start]               min-content        [content-footer-end
    page-backgroundImage-start]         min-content        [page-backgroundImage-end
    page-backgroundImageOverlay-start]  min-content        [page-backgroundImageOverlay-end page-end
    page-customCode-start]              min-content        [page-customCode-end        
  ];        
}

// Add Background Colors to the ENGrid Sections
// Assign each named section of the ENGrid to its designated row and column.
.page-alert{
  grid-column: pc;
  grid-row: page-alert;
  background-color: var(--engrid-page_alert-background-color);
  padding: var(--engrid-page_alert-padding);
  margin: var(--engrid-page_alert-margin);
}

.content-header{
  grid-column: pc;
  grid-row: content-header;
  background-color: var(--engrid-content_header-background-color);
  padding: var(--engrid-content_header-padding);
  margin: var(--engrid-content_header-margin);
}

.content-header.pseudo-subgrid > div{
  grid-column: cc;
}

.body-headerOutside{
  grid-column: bc;
  grid-row: body-headerOutside;
  background-color: var(--body-headerOutside-background-color);
  padding: var(--body-headerOutside-padding);
  margin: var(--body-headerOutside-margin);
}

.body-header{
  grid-column: bc;
  grid-row: body-header;
  background-color: var(--body-header-background-color);
  border-top-left-radius: var(--body-header-border-radius);
  border-top-right-radius: var(--body-header-border-radius);
  min-height: var(--body-header-border-radius);
  padding: var(--body-header-padding);
  margin: var(--body-header-margin);
}

.body-title{
  grid-column: bc;
  grid-row: body-title;
  background-color: var(--body-title-background-color);
  padding: var(--body-title-padding);
  margin: var(--body-title-margin);
}

.body-banner{
  grid-column: bc;
  grid-row: body-banner;
  background-color: var(--body-banner-background-color);
  padding: var(--body-banner-padding);
  margin: var(--body-banner-margin);
}

.body-bannerOverlay{
  grid-column: bc;
  grid-row: body-banner;
  background-color: var(--body-bannerOverlay-background-color);
  padding: var(--body-bannerOverlay-padding);
  margin: var(--body-bannerOverlay-margin);
}

.body-top{
  grid-column: bc;
  grid-row: body-top;
  background-color: var(--body-top-background-color);
  padding: var(--body-top-padding);
  margin: var(--body-top-margin);
}

.body-side{
  grid-column: bc;
  grid-row: body-side;
  background-color: var(--body-side-background-color);
  padding: var(--body-side-padding);
  margin: var(--body-side-margin);
}

.body-main{
  grid-column: bc;
  grid-row: body-main;
  background-color: var(--body-main-background-color);
  padding: var(--body-main-padding);
  margin: var(--body-main-margin);
}

.body-bottom{
  grid-column: bc;
  grid-row: body-bottom;
  background-color: var(--body-bottom-background-color);
  padding: var(--body-bottom-padding);
  margin: var(--body-bottom-margin);
}

.body-footer{
  grid-column: bc;
  grid-row: body-footer;
  background-color: var(--body-footer-background-color);
  border-bottom-left-radius: var(--body-footer-border-radius);
  border-bottom-right-radius: var(--body-footer-border-radius);
  min-height: var(--body-footer-border-radius);
  padding: var(--body-footer-padding);
  margin: var(--body-footer-margin);
}

.body-footerOutside{
  grid-column: bc;
  grid-row: body-footerOutside;
  background-color: var(--body-footerOutside-background-color);
  padding: var(--body-footerOutside-padding);
  margin: var(--body-footerOutside-margin);
}

.content-footerSpacer{
  grid-column: cc;
  grid-row: content-footerSpacer;
  background-color: var(--engrid-content_footerSpacer-background-color);
  padding: var(--engrid-content_footerSpacer-padding);
  margin: var(--engrid-content_footerSpacer-margin);
}

.content-preFooter{
  grid-column: cc;
  grid-row: content-preFooter;
  background-color: var(--engrid-content_preFooter-background-color);
  padding: var(--engrid-content_preFooter-padding);
  margin: var(--engrid-content_preFooter-margin);
}

.content-footer{
  grid-column: pc;
  grid-row: content-footer;
  background-color: var(--engrid-content_footer-background-color);
  padding: var(--engrid-content_footer-padding);
  margin: var(--engrid-content_footer-margin);
}

.content-footer.pseudo-subgrid > div{
  grid-column: cc;
}

.page-backgroundImage{
  grid-column: pc;
  grid-row: page-backgroundImage;
  padding: var(--engrid-page_backgroundImage-padding);
  margin: var(--engrid-page_backgroundImage-margin);
}

// Background color is set on the :before so it doesn't paint over the background image which will be set there
// REF: _engrid-background-image.scss
.page-backgroundImage:before{
  background-color: var(--engrid-page_backgroundImage-background-color);
}

.page-backgroundImageOverlay{
  grid-column: pc;
  grid-row: page-backgroundImage;
  background-color: var(--engrid-page_backgroundImageOverlay-background-color);
  padding: var(--engrid-page_backgroundImageOverlay-padding);
  margin: var(--engrid-page_backgroundImageOverlay-margin);
}

.page-customCode{
  grid-column: pc;
  grid-row: page-customCode;
  background-color: var(--engrid-page_customCode-background-color);
  padding: var(--engrid-page_customCode-padding);
  margin: var(--engrid-page_customCode-margin);
}

// The ENGrid Custom Code section should never be visible outside of page builder
body:not(#en__pagebuilder) .page-customCode {
  display: none;
}

// This is super hacky because of the lose matching that's trying to tell if an ENGrid section class name is present on the row or not
// If not, then this non ENGrid existant row gets assigned to a non-existant row name so that it is placed at the bottom of the grid
.en__component--advrow:not([class*="-"]) > div{
  grid-row: na; 
}

/*
* ##########################################################
* # ENGRID - Section Stylings
* ##########################################################
*/

// .body-header,
// .body-title,
// .body-top,
// .body-side,
// .body-main,
// .body-bottom,
// .body-footer {
//   padding-left: var(--spacing-lg);
//   padding-right: var(--spacing-lg);
// }

.body-bannerOverlay{
  position: relative;
  // padding-left: var(--spacing-lg);
  // padding-right: var(--spacing-lg);
}

// The overlay should be hidden if it's empty so any figcaptions with links can be clicked
body:not(#en__pagebuilder) .body-bannerOverlay:empty{
  display: none;
}

.body-footer {
  // padding-bottom: var(--spacing-lg);
}

// Add drop shadows to the body sections
.en__component--column.body-header,
.en__component--column.body-title,
.en__component--column.body-banner,
.en__component--column.body-top,
.en__component--column.body-side,
.en__component--column.body-main,
.en__component--column.body-bottom,
.en__component--column.body-footer {
  position: relative;
}


.body-header:before,
.body-title:before,
.body-banner:before,
.body-top:before,
.body-side:before,
.body-main:before,
.body-bottom:before,
.body-footer:before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  // z-index: -1;
  -webkit-box-shadow: 0 36px 36px -5px rgba(0, 0, 0, 0.2),
    0 1px 1px -5px rgba(0, 0, 0, 0.14), 0 2px 1px -5px rgba(0, 0, 0, 0.12);
  box-shadow: 0 36px 36px -5px rgba(0, 0, 0, 0.2), 0 1px 1px -5px rgba(0, 0, 0, 0.14),
    0 2px 1px -5px rgba(0, 0, 0, 0.12);
}

// The overlay should be hidden if it's empty so any figcaptions with links can be clicked
body:not(#en__pagebuilder) .page-backgroundImageOverlay:empty{
  display: none;
}

// The figcaption on the background image is not ready for primetime yet. It can get hidden on scroll, or the margin can become off when its placement gets adjusted (https://d.pr/v/xxv2C6)
body:not(#en__pagebuilder) .page-backgroundImage figcaption{
  display: none;
}


// ####################################################################
//  FOR BROWSERS THAT DO NOT SUPPORT CSS GRID, FLEXBOX
// ####################################################################
@supports not (display: grid) {
  .en__component--advrow,
  .pseudo-subgrid {
    display: flex;
    flex-direction: column;
    max-width: 840px;
    width: 100%;
    margin: 0 auto;
  }

  .en__component--advrow > *,
  .pseudo-subgrid > *{
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    max-width: 100%;
  }

  .en__component--advcolumn {
    flex-basis: auto; // Required otherwise Flexbox collapses in on itself in IE11
  }
}

// ####################################################################
//  Explicitly set every sections default z-index
// ####################################################################

body:not(#en__pagebuilder){
  .page-alert,
  .page-customCode{
    z-index: 7; // Highest default z-index
  }

  .content-header,
  .content-footerSpacer,
  .content-preFooter,
  .content-footer{
    z-index: 6;
  }

  .body-bannerOverlay{
    z-index: 5;
  }

  .body-headerOutside,
  .body-header,
  .body-title,
  .body-banner,
  .body-top,
  .body-side,
  .body-main,
  .body-bottom,
  .body-footer,
  .body-footerOutside{
    z-index: 4;
  }

  // z-index has to be negative or it will overlap content areas and make them non-clickable
  .body-header:before,
  .body-title:before,
  .body-banner:before,
  .body-top:before,
  .body-side:before,
  .body-main:before,
  .body-bottom:before,
  .body-footer:before {
    z-index: -1;
  }

  .page-backgroundImageOverlay{
    z-index: -2;
  }

  // z-index has to be negative or it will overlap content areas like the skip-link
  .page-backgroundImage{
    z-index: -3; // Lowest default z-index
  }

}

// ####################################################################
//  Outside of page builder, if a grid section contains no content, hide it. Except for footerSpacer.
// ####################################################################

body:not(#en__pagebuilder){
  .page-alert:empty,
  .content-header:empty,
  .body-headerOutside:empty,
  .body-header:empty,
  .body-title:empty,
  .body-banner:empty,
  .body-bannerOverlay:empty,
  .body-top:empty,
  .body-side:empty,
  .body-main:empty,
  .body-bottom:empty,
  .body-footer:empty,
  .body-footerOutside:empty,
  .content-preFooter:empty,
  .content-footer:empty,
  .page-backgroundImage:empty,
  .page-backgroundImageOverlay:empty,
  .page-customCode:empty{
    display: none;
  }
}


// ####################################################################
//  QUICK REFERENCE / COPY AND PASTE LIST OF ALL ENGRID SECTIONS
// ####################################################################

// page-alert
// content-header pseudo-subgrid
// body-headerOutside
// body-header
// body-title
// body-banner
// body-bannerOverlay
// body-top
// body-side
// body-main
// body-bottom
// body-footer
// body-footerOutside
// content-footerSpacer
// content-preFooter pseudo-subgrid
// content-footer pseudo-subgrid
// page-backgroundImage pseudo-subgrid
// page-backgroundImageOverlay pseudo-subgrid
// page-customCode

// .page-alert,
// .content-header,
// .body-headerOutside,
// .body-header,
// .body-title,
// .body-banner,
// .body-bannerOverlay,
// .body-top,
// .body-side,
// .body-main,
// .body-bottom,
// .body-footer,
// .body-footerOutside,
// .content-footerSpacer,
// .content-preFooter,
// .content-footer,
// .page-backgroundImage,
// .page-backgroundImageOverlay,
// .page-customCode